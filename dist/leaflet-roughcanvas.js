!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,e){return t.type===e}const e={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0};class s{constructor(t){this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(t),this.processPoints()}tokenize(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return console.error("Unrecognized segment command: "+t),[];e[e.length]={type:this.NUMBER,text:""+parseFloat(RegExp.$1)},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e}parseData(s){const i=this.tokenize(s);let n=0,r=i[n],a="BOD";for(this.segments=new Array;!t(r,this.EOD);){let h;const o=new Array;if("BOD"===a){if("M"!==r.text&&"m"!==r.text)return void this.parseData("M0,0"+s);n++,h=e[r.text],a=r.text}else t(r,this.NUMBER)?h=e[a]:(n++,h=e[r.text],a=r.text);if(n+h<i.length){for(let e=n;e<n+h;e++){const s=i[e];if(!t(s,this.NUMBER))return void console.error("Parameter type is not a number: "+a+","+s.text);o[o.length]=+s.text}if("number"!=typeof e[a])return void console.error("Unsupported segment type: "+a);{const t={key:a,data:o};this.segments.push(t),n+=h,r=i[n],"M"===a&&(a="L"),"m"===a&&(a="l")}}else console.error("Path data ended before all parameters were found")}}get closed(){if(void 0===this._closed){this._closed=!1;for(const t of this.segments)"z"===t.key.toLowerCase()&&(this._closed=!0)}return this._closed}processPoints(){let t=null,e=[0,0];for(let s=0;s<this.segments.length;s++){const i=this.segments[s];switch(i.key){case"M":case"L":case"T":i.point=[i.data[0],i.data[1]];break;case"m":case"l":case"t":i.point=[i.data[0]+e[0],i.data[1]+e[1]];break;case"H":i.point=[i.data[0],e[1]];break;case"h":i.point=[i.data[0]+e[0],e[1]];break;case"V":i.point=[e[0],i.data[0]];break;case"v":i.point=[e[0],i.data[0]+e[1]];break;case"z":case"Z":t&&(i.point=[t[0],t[1]]);break;case"C":i.point=[i.data[4],i.data[5]];break;case"c":i.point=[i.data[4]+e[0],i.data[5]+e[1]];break;case"S":i.point=[i.data[2],i.data[3]];break;case"s":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"Q":i.point=[i.data[2],i.data[3]];break;case"q":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"A":i.point=[i.data[5],i.data[6]];break;case"a":i.point=[i.data[5]+e[0],i.data[6]+e[1]]}"m"!==i.key&&"M"!==i.key||(t=null),i.point&&(e=i.point,t||(t=i.point)),"z"!==i.key&&"Z"!==i.key||(t=null)}}}class i{constructor(t){this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new s(t)}get segments(){return this.parsed.segments}get closed(){return this.parsed.closed}get linearPoints(){if(!this._linearPoints){const t=[];let e=[];for(const s of this.parsed.segments){const i=s.key.toLowerCase();("m"!==i&&"z"!==i||(e.length&&(t.push(e),e=[]),"z"!==i))&&(s.point&&e.push(s.point))}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints}get first(){return this._first}set first(t){this._first=t}setPosition(t,e){this._position=[t,e],this._first||(this._first=[t,e])}get position(){return this._position}get x(){return this._position[0]}get y(){return this._position[1]}}class n{constructor(t,e,s,i,n,r){if(this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=t,t[0]===e[0]&&t[1]===e[1])return;const a=Math.PI/180;this._rx=Math.abs(s[0]),this._ry=Math.abs(s[1]),this._sinPhi=Math.sin(i*a),this._cosPhi=Math.cos(i*a);const h=this._cosPhi*(t[0]-e[0])/2+this._sinPhi*(t[1]-e[1])/2,o=-this._sinPhi*(t[0]-e[0])/2+this._cosPhi*(t[1]-e[1])/2;let l=0;const c=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*o*o-this._ry*this._ry*h*h;if(c<0){const t=Math.sqrt(1-c/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*t,this._ry=this._ry*t,l=0}else l=(n===r?-1:1)*Math.sqrt(c/(this._rx*this._rx*o*o+this._ry*this._ry*h*h));const p=l*this._rx*o/this._ry,u=-l*this._ry*h/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*p-this._sinPhi*u+(t[0]+e[0])/2,this._C[1]=this._sinPhi*p+this._cosPhi*u+(t[1]+e[1])/2,this._theta=this.calculateVectorAngle(1,0,(h-p)/this._rx,(o-u)/this._ry);let f=this.calculateVectorAngle((h-p)/this._rx,(o-u)/this._ry,(-h-p)/this._rx,(-o-u)/this._ry);!r&&f>0?f-=2*Math.PI:r&&f<0&&(f+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(f/(Math.PI/2))),this._delta=f/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}getNextSegment(){if(this._segIndex===this._numSegs)return null;const t=Math.cos(this._theta),e=Math.sin(this._theta),s=this._theta+this._delta,i=Math.cos(s),n=Math.sin(s),r=[this._cosPhi*this._rx*i-this._sinPhi*this._ry*n+this._C[0],this._sinPhi*this._rx*i+this._cosPhi*this._ry*n+this._C[1]],a=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],h=[r[0]+this._T*(this._cosPhi*this._rx*n+this._sinPhi*this._ry*i),r[1]+this._T*(this._sinPhi*this._rx*n-this._cosPhi*this._ry*i)];return this._theta=s,this._from=[r[0],r[1]],this._segIndex++,{cp1:a,cp2:h,to:r}}calculateVectorAngle(t,e,s,i){const n=Math.atan2(e,t),r=Math.atan2(i,s);return r>=n?r-n:2*Math.PI-(n-r)}}class r{constructor(t,e){this.sets=t,this.closed=e}fit(t){const e=[];for(const s of this.sets){const i=s.length;let n=Math.floor(t*i);if(n<5){if(i<=5)continue;n=5}e.push(this.reduce(s,n))}let s="";for(const t of e){for(let e=0;e<t.length;e++){const i=t[e];s+=0===e?"M"+i[0]+","+i[1]:"L"+i[0]+","+i[1]}this.closed&&(s+="z ")}return s}distance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}reduce(t,e){if(t.length<=e)return t;const s=t.slice(0);for(;s.length>e;){let t=-1,e=-1;for(let i=1;i<s.length-1;i++){const n=this.distance(s[i-1],s[i]),r=this.distance(s[i],s[i+1]),a=this.distance(s[i-1],s[i+1]),h=(n+r+a)/2,o=Math.sqrt(h*(h-n)*(h-r)*(h-a));(t<0||o<t)&&(t=o,e=i)}if(!(e>0))break;s.splice(e,1)}return s}}class a{constructor(t,e){this.xi=Number.MAX_VALUE,this.yi=Number.MAX_VALUE,this.px1=t[0],this.py1=t[1],this.px2=e[0],this.py2=e[1],this.a=this.py2-this.py1,this.b=this.px1-this.px2,this.c=this.px2*this.py1-this.px1*this.py2,this._undefined=0===this.a&&0===this.b&&0===this.c}isUndefined(){return this._undefined}intersects(t){if(this.isUndefined()||t.isUndefined())return!1;let e=Number.MAX_VALUE,s=Number.MAX_VALUE,i=0,n=0;const r=this.a,a=this.b,h=this.c;return Math.abs(a)>1e-5&&(e=-r/a,i=-h/a),Math.abs(t.b)>1e-5&&(s=-t.a/t.b,n=-t.c/t.b),e===Number.MAX_VALUE?s===Number.MAX_VALUE?-h/r==-t.c/t.a&&(this.py1>=Math.min(t.py1,t.py2)&&this.py1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.py2>=Math.min(t.py1,t.py2)&&this.py2<=Math.max(t.py1,t.py2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=this.px1,this.yi=s*this.xi+n,!((this.py1-this.yi)*(this.yi-this.py2)<-1e-5||(t.py1-this.yi)*(this.yi-t.py2)<-1e-5)&&(!(Math.abs(t.a)<1e-5)||!((t.px1-this.xi)*(this.xi-t.px2)<-1e-5))):s===Number.MAX_VALUE?(this.xi=t.px1,this.yi=e*this.xi+i,!((t.py1-this.yi)*(this.yi-t.py2)<-1e-5||(this.py1-this.yi)*(this.yi-this.py2)<-1e-5)&&(!(Math.abs(r)<1e-5)||!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5))):e===s?i===n&&(this.px1>=Math.min(t.px1,t.px2)&&this.px1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.px2>=Math.min(t.px1,t.px2)&&this.px2<=Math.max(t.px1,t.px2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=(n-i)/(e-s),this.yi=e*this.xi+i,!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5||(t.px1-this.xi)*(this.xi-t.px2)<-1e-5))}}class h{constructor(t,e,s,i,n,r,h,o){this.deltaX=0,this.hGap=0,this.top=t,this.bottom=e,this.left=s,this.right=i,this.gap=n,this.sinAngle=r,this.tanAngle=o,Math.abs(r)<1e-4?this.pos=s+n:Math.abs(r)>.9999?this.pos=t+n:(this.deltaX=(e-t)*Math.abs(o),this.pos=s-Math.abs(this.deltaX),this.hGap=Math.abs(n/h),this.sLeft=new a([s,e],[s,t]),this.sRight=new a([i,e],[i,t]))}nextLine(){if(Math.abs(this.sinAngle)<1e-4){if(this.pos<this.right){const t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(Math.abs(this.sinAngle)>.9999){if(this.pos<this.bottom){const t=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,t}}else{let t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,s=this.bottom,i=this.top;if(this.pos<this.right+this.deltaX){for(;t<this.left&&e<this.left||t>this.right&&e>this.right;)if(this.pos+=this.hGap,t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;const n=new a([t,s],[e,i]);this.sLeft&&n.intersects(this.sLeft)&&(t=n.xi,s=n.yi),this.sRight&&n.intersects(this.sRight)&&(e=n.xi,i=n.yi),this.tanAngle>0&&(t=this.right-(t-this.left),e=this.right-(e-this.left));const r=[t,s,e,i];return this.pos+=this.hGap,r}}return null}}function o(t){const e=t[0],s=t[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(e[1]-s[1],2))}function l(t,e){const s=[],i=new a([t[0],t[1]],[t[2],t[3]]);for(let t=0;t<e.length;t++){const n=new a(e[t],e[(t+1)%e.length]);i.intersects(n)&&s.push([i.xi,i.yi])}return s}function c(t,e,s,i,n,r,a){return[-s*r-i*n+s+r*t+n*e,a*(s*n-i*r)+i+-a*n*t+a*r*e]}function p(t,e){const s=[];if(t&&t.length){let i=t[0][0],n=t[0][0],r=t[0][1],a=t[0][1];for(let e=1;e<t.length;e++)i=Math.min(i,t[e][0]),n=Math.max(n,t[e][0]),r=Math.min(r,t[e][1]),a=Math.max(a,t[e][1]);const o=e.hachureAngle;let c=e.hachureGap;c<0&&(c=4*e.strokeWidth),c=Math.max(c,.1);const p=o%180*(Math.PI/180),u=Math.cos(p),f=Math.sin(p),g=Math.tan(p),d=new h(r-1,a+1,i-1,n+1,c,f,u,g);let y;for(;null!=(y=d.nextLine());){const e=l(y,t);for(let t=0;t<e.length;t++)if(t<e.length-1){const i=e[t],n=e[t+1];s.push([i,n])}}}return s}function u(t,e,s,i,n,r){const a=[];let h=Math.abs(s/2),o=Math.abs(i/2);h+=r.getOffset(.05*-h,.05*h,n),o+=r.getOffset(.05*-o,.05*o,n);const l=n.hachureAngle;let p=n.hachureGap;p<=0&&(p=4*n.strokeWidth);let u=n.fillWeight;u<0&&(u=n.strokeWidth/2);const f=l%180*(Math.PI/180),g=Math.tan(f),d=o/h,y=Math.sqrt(d*g*d*g+1),_=d*g/y,v=1/y,b=p/(h*o/Math.sqrt(o*v*(o*v)+h*_*(h*_))/h);let w=Math.sqrt(h*h-(t-h+b)*(t-h+b));for(let s=t-h+b;s<t+h;s+=b){w=Math.sqrt(h*h-(t-s)*(t-s));const i=c(s,e-w,t,e,_,v,d),n=c(s,e+w,t,e,_,v,d);a.push([i,n])}return a}class f{constructor(t){this.renderer=t}fillPolygon(t,e){return this._fillPolygon(t,e)}fillEllipse(t,e,s,i,n){return this._fillEllipse(t,e,s,i,n)}_fillPolygon(t,e,s=!1){const i=p(t,e);return{type:"fillSketch",ops:this.renderLines(i,e,s)}}_fillEllipse(t,e,s,i,n,r=!1){const a=u(t,e,s,i,n,this.renderer);return{type:"fillSketch",ops:this.renderLines(a,n,r)}}renderLines(t,e,s){let i=[],n=null;for(const r of t)i=i.concat(this.renderer.doubleLine(r[0][0],r[0][1],r[1][0],r[1][1],e)),s&&n&&(i=i.concat(this.renderer.doubleLine(n[0],n[1],r[0][0],r[0][1],e))),n=r[1];return i}}class g extends f{fillPolygon(t,e){return this._fillPolygon(t,e,!0)}fillEllipse(t,e,s,i,n){return this._fillEllipse(t,e,s,i,n,!0)}}class d extends f{fillPolygon(t,e){const s=this._fillPolygon(t,e),i=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygon(t,i);return s.ops=s.ops.concat(n.ops),s}fillEllipse(t,e,s,i,n){const r=this._fillEllipse(t,e,s,i,n),a=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),h=this._fillEllipse(t,e,s,i,a);return r.ops=r.ops.concat(h.ops),r}}class y{constructor(t){this.renderer=t}fillPolygon(t,e){const s=p(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0}));return this.dotsOnLines(s,e)}fillEllipse(t,e,s,i,n){const r=u(t,e,s,i,n=Object.assign({},n,{curveStepCount:4,hachureAngle:0}),this.renderer);return this.dotsOnLines(r,n)}dotsOnLines(t,e){let s=[],i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.max(i,.1);let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);for(const r of t){const t=o(r)/i,a=Math.ceil(t)-1,h=Math.atan((r[1][1]-r[0][1])/(r[1][0]-r[0][0]));for(let t=0;t<a;t++){const a=i*(t+1),o=a*Math.sin(h),l=a*Math.cos(h),c=[r[0][0]-l,r[0][1]+o],p=this.renderer.getOffset(c[0]-i/4,c[0]+i/4,e),u=this.renderer.getOffset(c[1]-i/4,c[1]+i/4,e),f=this.renderer.ellipse(p,u,n,n,e);s=s.concat(f.ops)}}return{type:"fillSketch",ops:s}}}const _={};function v(t,e){let s=e.fillStyle||"hachure";if(!_[s])switch(s){case"zigzag":_[s]||(_[s]=new g(t));break;case"cross-hatch":_[s]||(_[s]=new d(t));break;case"dots":_[s]||(_[s]=new y(t));break;case"hachure":default:s="hachure",_[s]||(_[s]=new f(t))}return _[s]}class b{line(t,e,s,i,n){return{type:"path",ops:this.doubleLine(t,e,s,i,n)}}linearPath(t,e,s){const i=(t||[]).length;if(i>2){let n=[];for(let e=0;e<i-1;e++)n=n.concat(this.doubleLine(t[e][0],t[e][1],t[e+1][0],t[e+1][1],s));return e&&(n=n.concat(this.doubleLine(t[i-1][0],t[i-1][1],t[0][0],t[0][1],s))),{type:"path",ops:n}}return 2===i?this.line(t[0][0],t[0][1],t[1][0],t[1][1],s):{type:"path",ops:[]}}polygon(t,e){return this.linearPath(t,!0,e)}rectangle(t,e,s,i,n){const r=[[t,e],[t+s,e],[t+s,e+i],[t,e+i]];return this.polygon(r,n)}curve(t,e){const s=this._curveWithOffset(t,1*(1+.2*e.roughness),e),i=this._curveWithOffset(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:s.concat(i)}}ellipse(t,e,s,i,n){const r=2*Math.PI/n.curveStepCount;let a=Math.abs(s/2),h=Math.abs(i/2);a+=this.getOffset(.05*-a,.05*a,n),h+=this.getOffset(.05*-h,.05*h,n);const o=this._ellipse(r,t,e,a,h,1,r*this.getOffset(.1,this.getOffset(.4,1,n),n),n),l=this._ellipse(r,t,e,a,h,1.5,0,n);return{type:"path",ops:o.concat(l)}}arc(t,e,s,i,n,r,a,h,o){const l=t,c=e;let p=Math.abs(s/2),u=Math.abs(i/2);p+=this.getOffset(.01*-p,.01*p,o),u+=this.getOffset(.01*-u,.01*u,o);let f=n,g=r;for(;f<0;)f+=2*Math.PI,g+=2*Math.PI;g-f>2*Math.PI&&(f=0,g=2*Math.PI);const d=2*Math.PI/o.curveStepCount,y=Math.min(d/2,(g-f)/2),_=this._arc(y,l,c,p,u,f,g,1,o),v=this._arc(y,l,c,p,u,f,g,1.5,o);let b=_.concat(v);return a&&(h?(b=b.concat(this.doubleLine(l,c,l+p*Math.cos(f),c+u*Math.sin(f),o)),b=b.concat(this.doubleLine(l,c,l+p*Math.cos(g),c+u*Math.sin(g),o))):(b.push({op:"lineTo",data:[l,c]}),b.push({op:"lineTo",data:[l+p*Math.cos(f),c+u*Math.sin(f)]}))),{type:"path",ops:b}}svgPath(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let s=new i(t);if(e.simplification){const t=new r(s.linearPoints,s.closed).fit(e.simplification);s=new i(t)}let n=[];const a=s.segments||[];for(let t=0;t<a.length;t++){const i=a[t],r=t>0?a[t-1]:null,h=this._processSegment(s,i,r,e);h&&h.length&&(n=n.concat(h))}return{type:"path",ops:n}}solidFillPolygon(t,e){const s=[];if(t.length){const i=e.maxRandomnessOffset||0,n=t.length;if(n>2){s.push({op:"move",data:[t[0][0]+this.getOffset(-i,i,e),t[0][1]+this.getOffset(-i,i,e)]});for(let r=1;r<n;r++)s.push({op:"lineTo",data:[t[r][0]+this.getOffset(-i,i,e),t[r][1]+this.getOffset(-i,i,e)]})}}return{type:"fillPath",ops:s}}patternFillPolygon(t,e){return v(this,e).fillPolygon(t,e)}patternFillEllipse(t,e,s,i,n){return v(this,n).fillEllipse(t,e,s,i,n)}patternFillArc(t,e,s,i,n,r,a){const h=t,o=e;let l=Math.abs(s/2),c=Math.abs(i/2);l+=this.getOffset(.01*-l,.01*l,a),c+=this.getOffset(.01*-c,.01*c,a);let p=n,u=r;for(;p<0;)p+=2*Math.PI,u+=2*Math.PI;u-p>2*Math.PI&&(p=0,u=2*Math.PI);const f=(u-p)/a.curveStepCount,g=[];for(let t=p;t<=u;t+=f)g.push([h+l*Math.cos(t),o+c*Math.sin(t)]);return g.push([h+l*Math.cos(u),o+c*Math.sin(u)]),g.push([h,o]),this.patternFillPolygon(g,a)}getOffset(t,e,s){return s.roughness*(Math.random()*(e-t)+t)}doubleLine(t,e,s,i,n){const r=this._line(t,e,s,i,n,!0,!1),a=this._line(t,e,s,i,n,!0,!0);return r.concat(a)}_line(t,e,s,i,n,r,a){const h=Math.pow(t-s,2)+Math.pow(e-i,2);let o=n.maxRandomnessOffset||0;o*o*100>h&&(o=Math.sqrt(h)/10);const l=o/2,c=.2+.2*Math.random();let p=n.bowing*n.maxRandomnessOffset*(i-e)/200,u=n.bowing*n.maxRandomnessOffset*(t-s)/200;p=this.getOffset(-p,p,n),u=this.getOffset(-u,u,n);const f=[];return r&&(a?f.push({op:"move",data:[t+this.getOffset(-l,l,n),e+this.getOffset(-l,l,n)]}):f.push({op:"move",data:[t+this.getOffset(-o,o,n),e+this.getOffset(-o,o,n)]})),a?f.push({op:"bcurveTo",data:[p+t+(s-t)*c+this.getOffset(-l,l,n),u+e+(i-e)*c+this.getOffset(-l,l,n),p+t+2*(s-t)*c+this.getOffset(-l,l,n),u+e+2*(i-e)*c+this.getOffset(-l,l,n),s+this.getOffset(-l,l,n),i+this.getOffset(-l,l,n)]}):f.push({op:"bcurveTo",data:[p+t+(s-t)*c+this.getOffset(-o,o,n),u+e+(i-e)*c+this.getOffset(-o,o,n),p+t+2*(s-t)*c+this.getOffset(-o,o,n),u+e+2*(i-e)*c+this.getOffset(-o,o,n),s+this.getOffset(-o,o,n),i+this.getOffset(-o,o,n)]}),f}_curve(t,e,s){const i=t.length;let n=[];if(i>3){const r=[],a=1-s.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<i;e++){const s=t[e];r[0]=[s[0],s[1]],r[1]=[s[0]+(a*t[e+1][0]-a*t[e-1][0])/6,s[1]+(a*t[e+1][1]-a*t[e-1][1])/6],r[2]=[t[e+1][0]+(a*t[e][0]-a*t[e+2][0])/6,t[e+1][1]+(a*t[e][1]-a*t[e+2][1])/6],r[3]=[t[e+1][0],t[e+1][1]],n.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}if(e&&2===e.length){const t=s.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+this.getOffset(-t,t,s),e[1]+ +this.getOffset(-t,t,s)]})}}else 3===i?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===i&&(n=n.concat(this.doubleLine(t[0][0],t[0][1],t[1][0],t[1][1],s)));return n}_ellipse(t,e,s,i,n,r,a,h){const o=this.getOffset(-.5,.5,h)-Math.PI/2,l=[];l.push([this.getOffset(-r,r,h)+e+.9*i*Math.cos(o-t),this.getOffset(-r,r,h)+s+.9*n*Math.sin(o-t)]);for(let a=o;a<2*Math.PI+o-.01;a+=t)l.push([this.getOffset(-r,r,h)+e+i*Math.cos(a),this.getOffset(-r,r,h)+s+n*Math.sin(a)]);return l.push([this.getOffset(-r,r,h)+e+i*Math.cos(o+2*Math.PI+.5*a),this.getOffset(-r,r,h)+s+n*Math.sin(o+2*Math.PI+.5*a)]),l.push([this.getOffset(-r,r,h)+e+.98*i*Math.cos(o+a),this.getOffset(-r,r,h)+s+.98*n*Math.sin(o+a)]),l.push([this.getOffset(-r,r,h)+e+.9*i*Math.cos(o+.5*a),this.getOffset(-r,r,h)+s+.9*n*Math.sin(o+.5*a)]),this._curve(l,null,h)}_curveWithOffset(t,e,s){const i=[];i.push([t[0][0]+this.getOffset(-e,e,s),t[0][1]+this.getOffset(-e,e,s)]),i.push([t[0][0]+this.getOffset(-e,e,s),t[0][1]+this.getOffset(-e,e,s)]);for(let n=1;n<t.length;n++)i.push([t[n][0]+this.getOffset(-e,e,s),t[n][1]+this.getOffset(-e,e,s)]),n===t.length-1&&i.push([t[n][0]+this.getOffset(-e,e,s),t[n][1]+this.getOffset(-e,e,s)]);return this._curve(i,null,s)}_arc(t,e,s,i,n,r,a,h,o){const l=r+this.getOffset(-.1,.1,o),c=[];c.push([this.getOffset(-h,h,o)+e+.9*i*Math.cos(l-t),this.getOffset(-h,h,o)+s+.9*n*Math.sin(l-t)]);for(let r=l;r<=a;r+=t)c.push([this.getOffset(-h,h,o)+e+i*Math.cos(r),this.getOffset(-h,h,o)+s+n*Math.sin(r)]);return c.push([e+i*Math.cos(a),s+n*Math.sin(a)]),c.push([e+i*Math.cos(a),s+n*Math.sin(a)]),this._curve(c,null,o)}_bezierTo(t,e,s,i,n,r,a,h){const o=[],l=[h.maxRandomnessOffset||1,(h.maxRandomnessOffset||1)+.5];let c=[0,0];for(let p=0;p<2;p++)0===p?o.push({op:"move",data:[a.x,a.y]}):o.push({op:"move",data:[a.x+this.getOffset(-l[0],l[0],h),a.y+this.getOffset(-l[0],l[0],h)]}),c=[n+this.getOffset(-l[p],l[p],h),r+this.getOffset(-l[p],l[p],h)],o.push({op:"bcurveTo",data:[t+this.getOffset(-l[p],l[p],h),e+this.getOffset(-l[p],l[p],h),s+this.getOffset(-l[p],l[p],h),i+this.getOffset(-l[p],l[p],h),c[0],c[1]]});return a.setPosition(c[0],c[1]),o}_processSegment(t,e,s,i){let r=[];switch(e.key){case"M":case"m":{const s="m"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y);const h=1*(i.maxRandomnessOffset||0);n+=this.getOffset(-h,h,i),a+=this.getOffset(-h,h,i),t.setPosition(n,a),r.push({op:"move",data:[n,a]})}break}case"L":case"l":{const s="l"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y),r=r.concat(this.doubleLine(t.x,t.y,n,a,i)),t.setPosition(n,a)}break}case"H":case"h":{const s="h"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.x),r=r.concat(this.doubleLine(t.x,t.y,n,t.y,i)),t.setPosition(n,t.y)}break}case"V":case"v":{const s="v"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.y),r=r.concat(this.doubleLine(t.x,t.y,t.x,n,i)),t.setPosition(t.x,n)}break}case"Z":case"z":t.first&&(r=r.concat(this.doubleLine(t.x,t.y,t.first[0],t.first[1],i)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":{const s="c"===e.key;if(e.data.length>=6){let n=+e.data[0],a=+e.data[1],h=+e.data[2],o=+e.data[3],l=+e.data[4],c=+e.data[5];s&&(n+=t.x,h+=t.x,l+=t.x,a+=t.y,o+=t.y,c+=t.y);const p=this._bezierTo(n,a,h,o,l,c,t,i);r=r.concat(p),t.bezierReflectionPoint=[l+(l-h),c+(c-o)]}break}case"S":case"s":{const n="s"===e.key;if(e.data.length>=4){let a=+e.data[0],h=+e.data[1],o=+e.data[2],l=+e.data[3];n&&(a+=t.x,o+=t.x,h+=t.y,l+=t.y);let c=a,p=h;const u=s?s.key:"";let f=null;"c"!==u&&"C"!==u&&"s"!==u&&"S"!==u||(f=t.bezierReflectionPoint),f&&(c=f[0],p=f[1]);const g=this._bezierTo(c,p,a,h,o,l,t,i);r=r.concat(g),t.bezierReflectionPoint=[o+(o-a),l+(l-h)]}break}case"Q":case"q":{const s="q"===e.key;if(e.data.length>=4){let n=+e.data[0],a=+e.data[1],h=+e.data[2],o=+e.data[3];s&&(n+=t.x,h+=t.x,a+=t.y,o+=t.y);const l=1*(1+.2*i.roughness),c=1.5*(1+.22*i.roughness);r.push({op:"move",data:[t.x+this.getOffset(-l,l,i),t.y+this.getOffset(-l,l,i)]});let p=[h+this.getOffset(-l,l,i),o+this.getOffset(-l,l,i)];r.push({op:"qcurveTo",data:[n+this.getOffset(-l,l,i),a+this.getOffset(-l,l,i),p[0],p[1]]}),r.push({op:"move",data:[t.x+this.getOffset(-c,c,i),t.y+this.getOffset(-c,c,i)]}),p=[h+this.getOffset(-c,c,i),o+this.getOffset(-c,c,i)],r.push({op:"qcurveTo",data:[n+this.getOffset(-c,c,i),a+this.getOffset(-c,c,i),p[0],p[1]]}),t.setPosition(p[0],p[1]),t.quadReflectionPoint=[h+(h-n),o+(o-a)]}break}case"T":case"t":{const n="t"===e.key;if(e.data.length>=2){let a=+e.data[0],h=+e.data[1];n&&(a+=t.x,h+=t.y);let o=a,l=h;const c=s?s.key:"";let p=null;"q"!==c&&"Q"!==c&&"t"!==c&&"T"!==c||(p=t.quadReflectionPoint),p&&(o=p[0],l=p[1]);const u=1*(1+.2*i.roughness),f=1.5*(1+.22*i.roughness);r.push({op:"move",data:[t.x+this.getOffset(-u,u,i),t.y+this.getOffset(-u,u,i)]});let g=[a+this.getOffset(-u,u,i),h+this.getOffset(-u,u,i)];r.push({op:"qcurveTo",data:[o+this.getOffset(-u,u,i),l+this.getOffset(-u,u,i),g[0],g[1]]}),r.push({op:"move",data:[t.x+this.getOffset(-f,f,i),t.y+this.getOffset(-f,f,i)]}),g=[a+this.getOffset(-f,f,i),h+this.getOffset(-f,f,i)],r.push({op:"qcurveTo",data:[o+this.getOffset(-f,f,i),l+this.getOffset(-f,f,i),g[0],g[1]]}),t.setPosition(g[0],g[1]),t.quadReflectionPoint=[a+(a-o),h+(h-l)]}break}case"A":case"a":{const s="a"===e.key;if(e.data.length>=7){const a=+e.data[0],h=+e.data[1],o=+e.data[2],l=+e.data[3],c=+e.data[4];let p=+e.data[5],u=+e.data[6];if(s&&(p+=t.x,u+=t.y),p===t.x&&u===t.y)break;if(0===a||0===h)r=r.concat(this.doubleLine(t.x,t.y,p,u,i)),t.setPosition(p,u);else for(let e=0;e<1;e++){const e=new n([t.x,t.y],[p,u],[a,h],o,!!l,!!c);let s=e.getNextSegment();for(;s;){const n=this._bezierTo(s.cp1[0],s.cp1[1],s.cp2[0],s.cp2[1],s.to[0],s.to[1],t,i);r=r.concat(n),s=e.getNextSegment()}}}break}}return r}}const w="undefined"!=typeof self,x=w&&self&&self.document&&self.document.currentScript&&self.document.currentScript.src;const m="undefined"!=typeof self;class M{constructor(t,e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1},this.config=t||{},this.surface=e,this.renderer=function(t){if(w&&x&&self&&self.workly&&t.async&&!t.noWorker){const e=t.worklyURL||"https://cdn.jsdelivr.net/gh/pshihn/workly/dist/workly.min.js";if(e){const t=`importScripts('${e}', '${x}');\nworkly.expose(self.rough.createRenderer());`,s=URL.createObjectURL(new Blob([t]));return self.workly.proxy(s)}}return new b}(this.config),this.config.options&&(this.defaultOptions=this._options(this.config.options))}_options(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_drawable(t,e,s){return{shape:t,sets:e||[],options:s||this.defaultOptions}}get lib(){return this.renderer}getCanvasSize(){const t=t=>t&&"object"==typeof t&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100;return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]}computePolygonSize(t){if(t.length){let e=t[0][0],s=t[0][0],i=t[0][1],n=t[0][1];for(let r=1;r<t.length;r++)e=Math.min(e,t[r][0]),s=Math.max(s,t[r][0]),i=Math.min(i,t[r][1]),n=Math.max(n,t[r][1]);return[s-e,n-i]}return[0,0]}polygonPath(t){let e="";if(t.length){e=`M${t[0][0]},${t[0][1]}`;for(let s=1;s<t.length;s++)e=`${e} L${t[s][0]},${t[s][1]}`}return e}computePathSize(t){let e=[0,0];if(m&&self.document)try{const s="http://www.w3.org/2000/svg",i=self.document.createElementNS(s,"svg");i.setAttribute("width","0"),i.setAttribute("height","0");const n=self.document.createElementNS(s,"path");n.setAttribute("d",t),i.appendChild(n),self.document.body.appendChild(i);const r=n.getBBox();r&&(e[0]=r.width||0,e[1]=r.height||0),self.document.body.removeChild(i)}catch(t){}const s=this.getCanvasSize();return e[0]*e[1]||(e=s),e}toPaths(t){const e=t.sets||[],s=t.options||this.defaultOptions,i=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:"none"};break;case"fillPath":e={d:this.opsToPath(t),stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"fillSketch":e=this.fillSketch(t,s);break;case"path2Dfill":e={d:t.path||"",stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"path2Dpattern":{const i=t.size,n={x:0,y:0,width:1,height:1,viewBox:`0 0 ${Math.round(i[0])} ${Math.round(i[1])}`,patternUnits:"objectBoundingBox",path:this.fillSketch(t,s)};e={d:t.path,stroke:"none",strokeWidth:0,pattern:n};break}}e&&i.push(e)}return i}fillSketch(t,e){let s=e.fillWeight;return s<0&&(s=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:s,fill:"none"}}opsToPath(t){let e="";for(const s of t.ops){const t=s.data;switch(s.op){case"move":e+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":e+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"qcurveTo":e+=`Q${t[0]} ${t[1]}, ${t[2]} ${t[3]} `;break;case"lineTo":e+=`L${t[0]} ${t[1]} `}}return e.trim()}}class P extends M{constructor(t,e){super(t,e)}line(t,e,s,i,n){const r=this._options(n);return this._drawable("line",[this.lib.line(t,e,s,i,r)],r)}rectangle(t,e,s,i,n){const r=this._options(n),a=[];if(r.fill){const n=[[t,e],[t+s,e],[t+s,e+i],[t,e+i]];"solid"===r.fillStyle?a.push(this.lib.solidFillPolygon(n,r)):a.push(this.lib.patternFillPolygon(n,r))}return a.push(this.lib.rectangle(t,e,s,i,r)),this._drawable("rectangle",a,r)}ellipse(t,e,s,i,n){const r=this._options(n),a=[];if(r.fill)if("solid"===r.fillStyle){const n=this.lib.ellipse(t,e,s,i,r);n.type="fillPath",a.push(n)}else a.push(this.lib.patternFillEllipse(t,e,s,i,r));return a.push(this.lib.ellipse(t,e,s,i,r)),this._drawable("ellipse",a,r)}circle(t,e,s,i){const n=this.ellipse(t,e,s,s,i);return n.shape="circle",n}linearPath(t,e){const s=this._options(e);return this._drawable("linearPath",[this.lib.linearPath(t,!1,s)],s)}arc(t,e,s,i,n,r,a=!1,h){const o=this._options(h),l=[];if(a&&o.fill)if("solid"===o.fillStyle){const a=this.lib.arc(t,e,s,i,n,r,!0,!1,o);a.type="fillPath",l.push(a)}else l.push(this.lib.patternFillArc(t,e,s,i,n,r,o));return l.push(this.lib.arc(t,e,s,i,n,r,a,!0,o)),this._drawable("arc",l,o)}curve(t,e){const s=this._options(e);return this._drawable("curve",[this.lib.curve(t,s)],s)}polygon(t,e){const s=this._options(e),i=[];if(s.fill)if("solid"===s.fillStyle)i.push(this.lib.solidFillPolygon(t,s));else{const e=this.computePolygonSize(t),n=[[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],r=this.lib.patternFillPolygon(n,s);r.type="path2Dpattern",r.size=e,r.path=this.polygonPath(t),i.push(r)}return i.push(this.lib.linearPath(t,!0,s)),this._drawable("polygon",i,s)}path(t,e){const s=this._options(e),i=[];if(!t)return this._drawable("path",i,s);if(s.fill)if("solid"===s.fillStyle){const e={type:"path2Dfill",path:t,ops:[]};i.push(e)}else{const e=this.computePathSize(t),n=[[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],r=this.lib.patternFillPolygon(n,s);r.type="path2Dpattern",r.size=e,r.path=t,i.push(r)}return i.push(this.lib.svgPath(t,s)),this._drawable("path",i,s)}}const k="undefined"!=typeof document;class O{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}static createRenderer(){return new b}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.ctx;for(const t of e)switch(t.type){case"path":i.save(),i.strokeStyle=s.stroke,i.lineWidth=s.strokeWidth,this._drawToContext(i,t),i.restore();break;case"fillPath":i.save(),i.fillStyle=s.fill||"",this._drawToContext(i,t),i.restore();break;case"fillSketch":this.fillSketch(i,t,s);break;case"path2Dfill":{this.ctx.save(),this.ctx.fillStyle=s.fill||"";const e=new Path2D(t.path);this.ctx.fill(e),this.ctx.restore();break}case"path2Dpattern":{const e=this.canvas.ownerDocument||k&&document;if(e){const i=t.size,n=e.createElement("canvas"),r=n.getContext("2d"),a=this.computeBBox(t.path);a&&(a.width||a.height)?(n.width=this.canvas.width,n.height=this.canvas.height,r.translate(a.x||0,a.y||0)):(n.width=i[0],n.height=i[1]),this.fillSketch(r,t,s),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(n,"repeat");const h=new Path2D(t.path);this.ctx.fill(h),this.ctx.restore()}else console.error("Cannot render path2Dpattern. No defs/document defined.");break}}}computeBBox(t){if(k)try{const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");s.setAttribute("width","0"),s.setAttribute("height","0");const i=self.document.createElementNS(e,"path");i.setAttribute("d",t),s.appendChild(i),document.body.appendChild(s);const n=i.getBBox();return document.body.removeChild(s),n}catch(t){}return null}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2),t.save(),t.strokeStyle=s.fill||"",t.lineWidth=i,this._drawToContext(t,e),t.restore()}_drawToContext(t,e){t.beginPath();for(const s of e.ops){const e=s.data;switch(s.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"qcurveTo":t.quadraticCurveTo(e[0],e[1],e[2],e[3]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill():t.stroke()}}class A extends O{constructor(t,e){super(t),this.gen=new P(e||null,this.canvas)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,s,i,n){const r=this.gen.line(t,e,s,i,n);return this.draw(r),r}rectangle(t,e,s,i,n){const r=this.gen.rectangle(t,e,s,i,n);return this.draw(r),r}ellipse(t,e,s,i,n){const r=this.gen.ellipse(t,e,s,i,n);return this.draw(r),r}circle(t,e,s,i){const n=this.gen.circle(t,e,s,i);return this.draw(n),n}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s),s}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s),s}arc(t,e,s,i,n,r,a=!1,h){const o=this.gen.arc(t,e,s,i,n,r,a,h);return this.draw(o),o}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s),s}path(t,e){const s=this.gen.path(t,e);return this.draw(s),s}}class S extends M{async line(t,e,s,i,n){const r=this._options(n);return this._drawable("line",[await this.lib.line(t,e,s,i,r)],r)}async rectangle(t,e,s,i,n){const r=this._options(n),a=[];if(r.fill){const n=[[t,e],[t+s,e],[t+s,e+i],[t,e+i]];"solid"===r.fillStyle?a.push(await this.lib.solidFillPolygon(n,r)):a.push(await this.lib.patternFillPolygon(n,r))}return a.push(await this.lib.rectangle(t,e,s,i,r)),this._drawable("rectangle",a,r)}async ellipse(t,e,s,i,n){const r=this._options(n),a=[];if(r.fill)if("solid"===r.fillStyle){const n=await this.lib.ellipse(t,e,s,i,r);n.type="fillPath",a.push(n)}else a.push(await this.lib.patternFillEllipse(t,e,s,i,r));return a.push(await this.lib.ellipse(t,e,s,i,r)),this._drawable("ellipse",a,r)}async circle(t,e,s,i){const n=await this.ellipse(t,e,s,s,i);return n.shape="circle",n}async linearPath(t,e){const s=this._options(e);return this._drawable("linearPath",[await this.lib.linearPath(t,!1,s)],s)}async arc(t,e,s,i,n,r,a=!1,h){const o=this._options(h),l=[];if(a&&o.fill)if("solid"===o.fillStyle){const a=await this.lib.arc(t,e,s,i,n,r,!0,!1,o);a.type="fillPath",l.push(a)}else l.push(await this.lib.patternFillArc(t,e,s,i,n,r,o));return l.push(await this.lib.arc(t,e,s,i,n,r,a,!0,o)),this._drawable("arc",l,o)}async curve(t,e){const s=this._options(e);return this._drawable("curve",[await this.lib.curve(t,s)],s)}async polygon(t,e){const s=this._options(e),i=[];if(s.fill)if("solid"===s.fillStyle)i.push(await this.lib.solidFillPolygon(t,s));else{const e=this.computePolygonSize(t),n=[[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],r=await this.lib.patternFillPolygon(n,s);r.type="path2Dpattern",r.size=e,r.path=this.polygonPath(t),i.push(r)}return i.push(await this.lib.linearPath(t,!0,s)),this._drawable("polygon",i,s)}async path(t,e){const s=this._options(e),i=[];if(!t)return this._drawable("path",i,s);if(s.fill)if("solid"===s.fillStyle){const e={type:"path2Dfill",path:t,ops:[]};i.push(e)}else{const e=this.computePathSize(t),n=[[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],r=await this.lib.patternFillPolygon(n,s);r.type="path2Dpattern",r.size=e,r.path=t,i.push(r)}return i.push(await this.lib.svgPath(t,s)),this._drawable("path",i,s)}}class C extends O{constructor(t,e){super(t),this.genAsync=new S(e||null,this.canvas)}get generator(){return this.genAsync}getDefaultOptions(){return this.genAsync.defaultOptions}async line(t,e,s,i,n){const r=await this.genAsync.line(t,e,s,i,n);return this.draw(r),r}async rectangle(t,e,s,i,n){const r=await this.genAsync.rectangle(t,e,s,i,n);return this.draw(r),r}async ellipse(t,e,s,i,n){const r=await this.genAsync.ellipse(t,e,s,i,n);return this.draw(r),r}async circle(t,e,s,i){const n=await this.genAsync.circle(t,e,s,i);return this.draw(n),n}async linearPath(t,e){const s=await this.genAsync.linearPath(t,e);return this.draw(s),s}async polygon(t,e){const s=await this.genAsync.polygon(t,e);return this.draw(s),s}async arc(t,e,s,i,n,r,a=!1,h){const o=await this.genAsync.arc(t,e,s,i,n,r,a,h);return this.draw(o),o}async curve(t,e){const s=await this.genAsync.curve(t,e);return this.draw(s),s}async path(t,e){const s=await this.genAsync.path(t,e);return this.draw(s),s}}const T="undefined"!=typeof document;class E{constructor(t){this.svg=t}static createRenderer(){return new b}get defs(){const t=this.svg.ownerDocument||T&&document;if(t&&!this._defs){const e=t.createElementNS("http://www.w3.org/2000/svg","defs");this.svg.firstChild?this.svg.insertBefore(e,this.svg.firstChild):this.svg.appendChild(e),this._defs=e}return this._defs||null}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||T&&document,n=i.createElementNS("http://www.w3.org/2000/svg","g");for(const t of e){let e=null;switch(t.type){case"path":e=i.createElementNS("http://www.w3.org/2000/svg","path"),e.setAttribute("d",this.opsToPath(t)),e.style.stroke=s.stroke,e.style.strokeWidth=s.strokeWidth+"",e.style.fill="none";break;case"fillPath":e=i.createElementNS("http://www.w3.org/2000/svg","path"),e.setAttribute("d",this.opsToPath(t)),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"fillSketch":e=this.fillSketch(i,t,s);break;case"path2Dfill":e=i.createElementNS("http://www.w3.org/2000/svg","path"),e.setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"path2Dpattern":if(this.defs){const n=t.size,r=i.createElementNS("http://www.w3.org/2000/svg","pattern"),a="rough-"+Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999));r.setAttribute("id",a),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("height","1"),r.setAttribute("viewBox",`0 0 ${Math.round(n[0])} ${Math.round(n[1])}`),r.setAttribute("patternUnits","objectBoundingBox");const h=this.fillSketch(i,t,s);r.appendChild(h),this.defs.appendChild(r),e=i.createElementNS("http://www.w3.org/2000/svg","path"),e.setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=`url(#${a})`}else console.error("Cannot render path2Dpattern. No defs/document defined.")}e&&n.appendChild(e)}return n}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2);const n=t.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",this.opsToPath(e)),n.style.stroke=s.fill||null,n.style.strokeWidth=i+"",n.style.fill="none",n}}class R extends E{constructor(t,e){super(t),this.gen=new P(e||null,this.svg)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t){return this.gen.opsToPath(t)}line(t,e,s,i,n){const r=this.gen.line(t,e,s,i,n);return this.draw(r)}rectangle(t,e,s,i,n){const r=this.gen.rectangle(t,e,s,i,n);return this.draw(r)}ellipse(t,e,s,i,n){const r=this.gen.ellipse(t,e,s,i,n);return this.draw(r)}circle(t,e,s,i){const n=this.gen.circle(t,e,s,i);return this.draw(n)}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s)}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s)}arc(t,e,s,i,n,r,a=!1,h){const o=this.gen.arc(t,e,s,i,n,r,a,h);return this.draw(o)}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s)}path(t,e){const s=this.gen.path(t,e);return this.draw(s)}}class z extends E{constructor(t,e){super(t),this.genAsync=new S(e||null,this.svg)}get generator(){return this.genAsync}getDefaultOptions(){return this.genAsync.defaultOptions}opsToPath(t){return this.genAsync.opsToPath(t)}async line(t,e,s,i,n){const r=await this.genAsync.line(t,e,s,i,n);return this.draw(r)}async rectangle(t,e,s,i,n){const r=await this.genAsync.rectangle(t,e,s,i,n);return this.draw(r)}async ellipse(t,e,s,i,n){const r=await this.genAsync.ellipse(t,e,s,i,n);return this.draw(r)}async circle(t,e,s,i){const n=await this.genAsync.circle(t,e,s,i);return this.draw(n)}async linearPath(t,e){const s=await this.genAsync.linearPath(t,e);return this.draw(s)}async polygon(t,e){const s=await this.genAsync.polygon(t,e);return this.draw(s)}async arc(t,e,s,i,n,r,a=!1,h){const o=await this.genAsync.arc(t,e,s,i,n,r,a,h);return this.draw(o)}async curve(t,e){const s=await this.genAsync.curve(t,e);return this.draw(s)}async path(t,e){const s=await this.genAsync.path(t,e);return this.draw(s)}}var D={canvas:(t,e)=>e&&e.async?new C(t,e):new A(t,e),svg:(t,e)=>e&&e.async?new z(t,e):new R(t,e),createRenderer:()=>A.createRenderer(),generator:(t,e)=>t&&t.async?new S(t,e):new P(t,e)};function q(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}!function(t,e){null==t&&(t=e("canvas").Context2d),null==t.prototype.ellipse&&(t.prototype.ellipse=function(t,e,s,i,n,r,a,h){this.save(),this.translate(t,e),this.rotate(n),this.scale(s,i),this.arc(0,0,1,r,a,h),this.restore()}),"function"==typeof Path2D&&"function"==typeof(new Path2D).addPath||function(){function e(t){if(this.ops_=[],null!=t)if("string"==typeof t)try{this.ops_=parser.parse(t)}catch(t){}else{if(!t.hasOwnProperty("ops_"))throw"Error: "+typeof t+"is not a valid argument to Path";this.ops_=t.ops_.slice(0)}}parser=function(){function t(t,e,s,i,n,r){this.message=t,this.expected=e,this.found=s,this.offset=i,this.line=n,this.column=r,this.name="SyntaxError"}return function(t,e){function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s}(t,Error),{SyntaxError:t,parse:function(e){var s,i=arguments.length>1?arguments[1]:{},n={},r={svg_path:bt},a=bt,h=n,o=null,l=function(t){return he},c=/^[Mm]/,p={type:"class",value:"[Mm]",description:"[Mm]"},u=function(t,e){var s=t;oe&&(s="M",oe=!1),he.push({type:"moveTo",args:pe(s,e[0])});for(var i=1;i<e.length;i++)he.push({type:"lineTo",args:pe(t,e[i])})},f=function(t,e){return ye(t,e)},g=/^[Zz]/,d={type:"class",value:"[Zz]",description:"[Zz]"},y=function(){he.push({type:"closePath",args:[]})},_=/^[Ll]/,v={type:"class",value:"[Ll]",description:"[Ll]"},b=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"lineTo",args:pe(t,e[s])})},w=/^[Hh]/,x={type:"class",value:"[Hh]",description:"[Hh]"},m=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"lineTo",args:ge(t,e[s])})},M=/^[Vv]/,P={type:"class",value:"[Vv]",description:"[Vv]"},k=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"lineTo",args:de(t,e[s])})},O=/^[Cc]/,A={type:"class",value:"[Cc]",description:"[Cc]"},S=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"bezierCurveTo",args:ue(t,e[s])})},C=function(t,e,s){return t.concat(e,s)},T=/^[Ss]/,E={type:"class",value:"[Ss]",description:"[Ss]"},L=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"bezierCurveTo",args:fe().concat(ue(t,e[s]))})},R=function(t,e){return t.concat(e)},z=/^[Qq]/,D={type:"class",value:"[Qq]",description:"[Qq]"},q=function(t,e){for(var s=0;s<e.length;s++)he.push({type:"quadraticCurveTo",args:ue(t,e[s])})},W=/^[Tt]/,F={type:"class",value:"[Tt]",description:"[Tt]"},I=function(t,e){for(var s=0;s<e.length;s++){var i=fe();he.push({type:"quadraticCurveTo",args:i.concat(ue(t,e[s]))}),ae=i.slice(0)}},N=/^[Aa]/,$={type:"class",value:"[Aa]",description:"[Aa]"},B=function(t,e){for(var s=0;s<e.length;s++){var i=[re.slice()],n=[pe(t,e[s].slice(-2))];absArgs=i.concat(e[s].slice(0,-2),n),Ce.apply(this,absArgs)}},U=function(t,e,s,i,n,r){return[parseFloat(t),parseFloat(e),parseFloat(ce(s).join("")),parseInt(i),parseInt(n),r[0],r[1]]},V=function(t,e){return[t,e]},X=function(t){return parseFloat(ce(t).join(""))},j="0",G={type:"literal",value:"0",description:'"0"'},Q="1",H={type:"literal",value:"1",description:'"1"'},Z=",",J={type:"literal",value:",",description:'","'},K=".",Y={type:"literal",value:".",description:'"."'},tt=/^[eE]/,et={type:"class",value:"[eE]",description:"[eE]"},st="+",it={type:"literal",value:"+",description:'"+"'},nt="-",rt={type:"literal",value:"-",description:'"-"'},at=/^[0-9]/,ht={type:"class",value:"[0-9]",description:"[0-9]"},ot=function(t){return t.join("")},lt=/^[ \t\n\r]/,ct={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},pt=0,ut=0,ft={line:1,column:1,seenCR:!1},gt=0,dt=[];if("startRule"in i){if(!(i.startRule in r))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=r[i.startRule]}function yt(t){return ut!==t&&(ut>t&&(ut=0,ft={line:1,column:1,seenCR:!1}),function(t,s,i){var n,r;for(n=s;n<i;n++)"\n"===(r=e.charAt(n))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(ft,ut,t),ut=t),ft}function _t(t){pt<gt||(pt>gt&&(gt=pt,dt=[]),dt.push(t))}function vt(s,i,n){var r=yt(n),a=n<e.length?e.charAt(n):null;return null!==i&&function(t){var e=1;for(t.sort((function(t,e){return t.description<e.description?-1:t.description>e.description?1:0}));e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(i),new t(null!==s?s:function(t,e){var s,i=new Array(t.length);for(s=0;s<t.length;s++)i[s]=t[s].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+e(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+e(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+e(t)}))}(e)+'"':"end of input")+" found."}(i,a),i,a,n,r.line,r.column)}function bt(){var t,e,s,i,r;for(t=pt,e=[],s=ne();s!==n;)e.push(s),s=ne();if(e!==n)if((s=wt())===n&&(s=o),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n?t=e=l():(pt=t,t=h)}else pt=t,t=h;else pt=t,t=h;return t}function wt(){var t,e,s,i,r;if(t=pt,(e=xt())!==n){for(s=pt,i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=wt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=[e,s]:(pt=t,t=h)}else pt=t,t=h;return t}function xt(){var t,e,s,i,r;if(t=pt,(e=Pt())!==n){for(s=pt,i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=mt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=[e,s]:(pt=t,t=h)}else pt=t,t=h;return t}function mt(){var t,e,s,i,r;if(t=pt,(e=Mt())!==n){for(s=pt,i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=mt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=[e,s]:(pt=t,t=h)}else pt=t,t=h;return t}function Mt(){var t;return(t=Ot())===n&&(t=At())===n&&(t=Ct())===n&&(t=Et())===n&&(t=Lt())===n&&(t=Dt())===n&&(t=Ft())===n&&(t=$t())===n&&(t=Ut()),t}function Pt(){var t,s,i,r;if(t=pt,c.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(p)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=kt())!==n?t=s=u(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function kt(){var t,e,s,i,r;return t=pt,(e=jt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=St())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Ot(){var t;return pt,g.test(e.charAt(pt))?(t=e.charAt(pt),pt++):(t=n,_t(d)),t!==n&&(t=y()),t}function At(){var t,s,i,r;if(t=pt,_.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(v)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=St())!==n?t=s=b(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function St(){var t,e,s,i,r;return t=pt,(e=jt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=St())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Ct(){var t,s,i,r;if(t=pt,w.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(x)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=Tt())!==n?t=s=m(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function Tt(){var t,e,s,i,r;return t=pt,(e=Gt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=Tt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Et(){var t,s,i,r;if(t=pt,M.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(P)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=Tt())!==n?t=s=k(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function Lt(){var t,s,i,r;if(t=pt,O.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(A)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=Rt())!==n?t=s=S(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function Rt(){var t,e,s,i,r;return t=pt,(e=zt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=Rt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function zt(){var t,e,s,i,r,a;return t=pt,(e=jt())!==n?((s=Jt())===n&&(s=o),s!==n&&(i=jt())!==n?((r=Jt())===n&&(r=o),r!==n&&(a=jt())!==n?t=e=C(e,i,a):(pt=t,t=h)):(pt=t,t=h)):(pt=t,t=h),t}function Dt(){var t,s,i,r;if(t=pt,T.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(E)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=qt())!==n?t=s=L(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function qt(){var t,e,s,i,r;return t=pt,(e=Wt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=qt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Wt(){var t,e,s,i;return t=pt,(e=jt())!==n?((s=Jt())===n&&(s=o),s!==n&&(i=jt())!==n?t=e=R(e,i):(pt=t,t=h)):(pt=t,t=h),t}function Ft(){var t,s,i,r;if(t=pt,z.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(D)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=It())!==n?t=s=q(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function It(){var t,e,s,i,r;return t=pt,(e=Nt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=It())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Nt(){var t,e,s,i;return t=pt,(e=jt())!==n?((s=Jt())===n&&(s=o),s!==n&&(i=jt())!==n?t=e=R(e,i):(pt=t,t=h)):(pt=t,t=h),t}function $t(){var t,s,i,r;if(t=pt,W.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(F)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=Bt())!==n?t=s=I(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function Bt(){var t,e,s,i,r;return t=pt,(e=jt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=Bt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Ut(){var t,s,i,r;if(t=pt,N.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t($)),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n&&(r=Vt())!==n?t=s=B(s,r):(pt=t,t=h)}else pt=t,t=h;return t}function Vt(){var t,e,s,i,r;return t=pt,(e=Xt())!==n?(s=pt,(i=Jt())===n&&(i=o),i!==n&&(r=Vt())!==n?s=i=[i,r]:(pt=s,s=h),s===n&&(s=o),s!==n?t=e=f(e,s):(pt=t,t=h)):(pt=t,t=h),t}function Xt(){var t,e,s,i,r,a,l,c,p,u,f;return t=pt,(e=Qt())!==n?((s=Jt())===n&&(s=o),s!==n&&(i=Qt())!==n?((r=Jt())===n&&(r=o),r!==n&&(a=Ht())!==n&&Jt()!==n&&(l=Zt())!==n?((c=Jt())===n&&(c=o),c!==n&&(p=Zt())!==n?((u=Jt())===n&&(u=o),u!==n&&(f=jt())!==n?t=e=U(e,i,a,l,p,f):(pt=t,t=h)):(pt=t,t=h)):(pt=t,t=h)):(pt=t,t=h)):(pt=t,t=h),t}function jt(){var t,e,s,i;return t=pt,(e=Gt())!==n?((s=Jt())===n&&(s=o),s!==n&&(i=Gt())!==n?t=e=V(e,i):(pt=t,t=h)):(pt=t,t=h),t}function Gt(){var t;return pt,(t=Ht())!==n&&(t=X(t)),t}function Qt(){var t;return(t=Yt())===n&&(t=ie()),t}function Ht(){var t,e,s;return t=pt,(e=se())===n&&(e=o),e!==n&&(s=Yt())!==n?t=e=[e,s]:(pt=t,t=h),t===n&&(t=pt,(e=se())===n&&(e=o),e!==n&&(s=ie())!==n?t=e=[e,s]:(pt=t,t=h)),t}function Zt(){var t;return 48===e.charCodeAt(pt)?(t=j,pt++):(t=n,_t(G)),t===n&&(49===e.charCodeAt(pt)?(t=Q,pt++):(t=n,_t(H))),t}function Jt(){var t,e,s,i,r;if(t=pt,e=[],(s=ne())!==n)for(;s!==n;)e.push(s),s=ne();else e=h;if(e!==n)if((s=Kt())===n&&(s=o),s!==n){for(i=[],r=ne();r!==n;)i.push(r),r=ne();i!==n?t=e=[e,s,i]:(pt=t,t=h)}else pt=t,t=h;else pt=t,t=h;if(t===n)if(t=pt,(e=Kt())!==n){for(s=[],i=ne();i!==n;)s.push(i),i=ne();s!==n?t=e=[e,s]:(pt=t,t=h)}else pt=t,t=h;return t}function Kt(){var t;return 44===e.charCodeAt(pt)?(t=Z,pt++):(t=n,_t(J)),t}function Yt(){var t,e,s;return t=pt,(e=te())!==n?((s=ee())===n&&(s=o),s!==n?t=e=[e,s]:(pt=t,t=h)):(pt=t,t=h),t===n&&(t=pt,(e=ie())!==n&&(s=ee())!==n?t=e=[e,s]:(pt=t,t=h)),t}function te(){var t,s,i,r;return t=pt,(s=ie())===n&&(s=o),s!==n?(46===e.charCodeAt(pt)?(i=K,pt++):(i=n,_t(Y)),i!==n&&(r=ie())!==n?t=s=[s,i,r]:(pt=t,t=h)):(pt=t,t=h),t===n&&(t=pt,(s=ie())!==n?(46===e.charCodeAt(pt)?(i=K,pt++):(i=n,_t(Y)),i!==n?t=s=[s,i]:(pt=t,t=h)):(pt=t,t=h)),t}function ee(){var t,s,i,r;return t=pt,tt.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(et)),s!==n?((i=se())===n&&(i=o),i!==n&&(r=ie())!==n?t=s=[s,i,r]:(pt=t,t=h)):(pt=t,t=h),t}function se(){var t;return 43===e.charCodeAt(pt)?(t=st,pt++):(t=n,_t(it)),t===n&&(45===e.charCodeAt(pt)?(t=nt,pt++):(t=n,_t(rt))),t}function ie(){var t,s;if(pt,t=[],at.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(ht)),s!==n)for(;s!==n;)t.push(s),at.test(e.charAt(pt))?(s=e.charAt(pt),pt++):(s=n,_t(ht));else t=h;return t!==n&&(t=ot(t)),t}function ne(){var t;return lt.test(e.charAt(pt))?(t=e.charAt(pt),pt++):(t=n,_t(ct)),t}var re=[0,0],ae=[0,0],he=[],oe=!0,le="";function ce(t){for(var e=[],s=0;s<t.length;s++)t[s]instanceof Array?e.push.apply(e,ce(t[s])):e.push(t[s]);return e}function pe(t,e){return-1==="mlazhvcsqt".indexOf(t)?re=e:(re[0]+=e[0],re[1]+=e[1]),le=t,re.slice(0)}function ue(t,e){for(var s=[],i=re.slice(0),n=0;n<e.length;n+=2){re=i.slice(0);var r=pe(t,e.slice(n,n+2));s=s.concat(r),n==e.length-4&&(ae=r.slice(0))}return s}function fe(){-1=="CcSsQqTt".indexOf(le)&&(ae=re.slice(0));var t=[0,0];return t[0]=2*re[0]-ae[0],t[1]=2*re[1]-ae[1],t}function ge(t,e){var s=[e,0];return"H"==t&&(s[1]=re[1]),pe(t,s)}function de(t,e){var s=[0,e];return"V"==t&&(s[0]=re[0]),pe(t,s)}function ye(t,e){var s=[t];if(e&&e.length>1)for(var i=e[1],n=0;n<i.length;n++)s.push(i[n]);return s}function _e(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function ve(t,e){return t[0]*e[0]+t[1]*e[1]}function be(t,e){return ve(t,e)/(_e(t)*_e(e))}function we(t,e,s){return Math.min(Math.max(val,e),s)}function xe(t,e){var s=1;return t[0]*e[1]-t[1]*e[0]<0&&(s=-1),s*Math.acos(we(be(t,e)),-1,1)}function me(t,e){var s=Math.cos(e),i=Math.sin(e);return[s*t[0]+i*t[1],-1*i*t[0]+s*t[1]]}function Me(t,e){var s=Math.cos(e),i=Math.sin(e);return[s*t[0]-i*t[1],i*t[0]+s*t[1]]}function Pe(t,e){return[(t[0]-e[0])/2,(t[1]-e[1])/2]}function ke(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Oe(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ae(t,e){return[t*e[0],t*e[1]]}function Se(t,e){return[t[0]+e[0],t[1]+e[1]]}function Ce(t,e,s,i,n,r,a){if(0!=e&&0!=s){i=i*(Math.PI/180);e=Math.abs(e),s=Math.abs(s);var h=me(Pe(t,a),i),o=Oe(h,h),l=Math.pow(e,2),c=Math.pow(s,2),p=Math.sqrt(o[0]/l+o[1]/c);p>1&&(e*=p,s*=p,l=Math.pow(e,2),c=Math.pow(s,2));var u=Math.sqrt(Math.abs(l*c-l*o[1]-c*o[0])/(l*o[1]+c*o[0]));n==r&&(u*=-1);var f=Ae(u,[e*h[1]/s,-s*h[0]/e]),g=Se(Me(f,i),ke(t,a)),d=[(h[0]-f[0])/e,(h[1]-f[1])/s],y=[(-1*h[0]-f[0])/e,(-1*h[1]-f[1])/s],_=xe([1,0],d),v=_,b=_+xe(d,y);he.push({type:"save",args:[]},{type:"translate",args:[g[0],g[1]]},{type:"rotate",args:[i]},{type:"scale",args:[e,s]},{type:"arc",args:[0,0,1,v,b,1-r]},{type:"restore",args:[]})}else he.push({type:"lineTo",args:a})}if((s=a())!==n&&pt===e.length)return s;throw s!==n&&pt<e.length&&_t({type:"end",description:"end of input"}),vt(null,dt,gt)}}}();var s=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"];function i(t){return function(){this.ops_.push({type:t,args:Array.prototype.slice.call(arguments,0)})}}for(var n=0;n<s.length;n++){var r=s[n];e.prototype[r]=i(r)}e.prototype.addPath=function(t,e){var s=!1;e&&null!=e.a&&null!=e.b&&null!=e.c&&null!=e.d&&null!=e.e&&null!=e.f&&(s=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[e.a,e.b,e.c,e.d,e.e,e.f]})),this.ops_=this.ops_.concat(t.ops_),s&&this.ops_.push({type:"restore",args:[]})},original_fill=t.prototype.fill,original_stroke=t.prototype.stroke,original_clip=t.prototype.clip,original_is_point_in_path=t.prototype.isPointInPath,original_is_point_in_stroke=t.prototype.isPointInStroke,t.prototype.fill=function(s){if(s instanceof e){this.beginPath();for(var i=0,n=s.ops_.length;i<n;i++){var r=s.ops_[i];t.prototype[r.type].apply(this,r.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},t.prototype.stroke=function(s){if(s instanceof e){this.beginPath();for(var i=0,n=s.ops_.length;i<n;i++){var r=s.ops_[i];t.prototype[r.type].apply(this,r.args)}original_stroke.call(this)}else original_stroke.call(this)},t.prototype.clip=function(s){if(s instanceof e){this.beginPath();for(var i=0,n=s.ops_.length;i<n;i++){var r=s.ops_[i];t.prototype[r.type].apply(this,r.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},t.prototype.isPointInPath=function(s){if(s instanceof e){this.beginPath();for(var i=0,n=s.ops_.length;i<n;i++){var r=s.ops_[i];t.prototype[r.type].apply(this,r.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},t.prototype.isPointInStroke=function(s){if(s instanceof e){this.beginPath();for(var i=0,n=s.ops_.length;i<n;i++){var r=s.ops_[i];t.prototype[r.type].apply(this,r.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=e}()}("undefined"==typeof CanvasRenderingContext2D?void 0:CanvasRenderingContext2D,q);var W=L.Canvas.extend({_initContainer:function(){L.Canvas.prototype._initContainer.call(this),this._rc=D.canvas(this._container)},_updatePoly:function(t,e){if(this._drawing){var s=t._parts,i=s.length;this._ctx;if(i){var n=t.options,r={};r.roughness=n.roughness||1,r.bowing=n.bowing||1,r.stroke=n.strokeColor||"#000000",r.strokeWidth=n.strokeWidth||1,e&&(r.fill=n.fillColor||n.color,r.fillStyle=n.fillStyle||"",r.fillWeight=n.fillWeight||"",r.hachureAngle=n.hachureAngle||-41,r.hachureGap=n.hachureGap||4,r.simplification=n.simplification||.5),r.curveStepCount=n.curveStepCount||9;var a=L.SVG.pointsToPath(s,e);this._rc.path(a,r),t.options.fillOpacity=0,L.Canvas.prototype._updatePoly.call(this,t,e)}}},_onClick:function(t){var e,s,i=this._map.mouseEventToLayerPoint(t);console.log(i);for(var n=this._drawFirst;n;n=n.next)(e=n.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(s=e);s&&(DomEvent.fakeStop(t),this._fireEvent([s],t))}});L.Canvas.RoughCanvas=W,L.Canvas.roughCanvas=function(){return new W}}));
//# sourceMappingURL=leaflet-roughcanvas.js.map
